(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function E(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(t){if(t.ep)return;t.ep=!0;const s=E(t);fetch(t.href,s)}})();document.addEventListener("DOMContentLoaded",()=>{const o={imageLifespan:1e3,mouseThreshold:150,inDuration:750,outDuration:1e3,staggerIn:100,staggerOut:25,slideDuration:1e3,slideEasing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easing:"cubic-bezier(0.87, 0, 0.13, 1)"},m=20,E=Array.from({length:m},(e,r)=>`/img${r+1}.jpeg`),u=document.querySelector(".trail-container");let t=window.innerWidth>1e3;const s=[];let c=null,v=0,i={x:0,y:0},D={x:0,y:0},p={x:0,y:0};const b={lerp:(e,r,n)=>(1-n)*e+n*r,distance:(e,r,n,l)=>Math.hypot(n-e,l-r)},M=()=>b.distance(i.x,i.y,D.x,D.y),O=(e,r)=>{const n=u.getBoundingClientRect();return e>=n.left&&e<=n.right&&r>=n.top&&r<=n.bottom},P=()=>{const e=document.createElement("div");e.classList.add("trail-img");const r=E[v];v=(v+1)%m;const n=u.getBoundingClientRect(),l=p.x-n.left-87.5,y=p.y-n.top-87.5,h=i.x-n.left-87.5,$=i.y-n.top-87.5;e.style.left=`${l}px`,e.style.top=`${y}px`,e.style.transition=`left ${o.slideDuration}ms ${o.slideEasing}, top ${o.slideDuration}ms ${o.slideEasing}`;const L=[],x=[];for(let g=0;g<10;g++){const a=document.createElement("div");a.classList.add("mask-layer");const d=document.createElement("div");d.classList.add("image-layer"),d.style.backgroundImage=`url(${r})`;const f=g*10,C=(g+1)*10;a.style.clipPath=`polygon(50% ${f}%, 50% ${f}%, 50% ${C}%, 50% ${C}%)`,a.style.transition=`clip-path ${o.inDuration}ms ${o.easing}`,a.style.transform="translateZ(0)",a.style.backfaceVisibility="hidden",a.appendChild(d),e.appendChild(a),L.push(a),x.push(d)}u.appendChild(e),requestAnimationFrame(()=>{e.style.left=`${h}px`,e.style.top=`${$}px`,L.forEach((g,a)=>{const d=a*10,f=(a+1)*10,A=Math.abs(a-4.5)*o.staggerIn;setTimeout(()=>{g.style.clipPath=`polygon(0% ${d}%, 100% ${d}%, 100% ${f}%, 0% ${f}%)`},A)})}),s.push({element:e,maskLayers:L,imageLayers:x,removeTime:Date.now()+o.imageLifespan})},T=()=>{const e=Date.now();if(s.length===0)return;const r=s[0];if(e>=r.removeTime){const n=s.shift();n.maskLayers.forEach((l,y)=>{const h=y*10,$=(y+1)*10,x=(4.5-Math.abs(y-4.5))*o.staggerOut;l.style.transition=`clip-path ${o.outDuration}ms ${o.easing}`,setTimeout(()=>{l.style.clipPath=`polygon(50% ${h}%, 50% ${h}%, 50% ${$}%, 50% ${$}%)`},x)}),n.imageLayers.forEach(l=>{l.style.transition=`opacity ${o.outDuration}ms ${o.easing}`,l.style.opacity="0.25"}),setTimeout(()=>{n.element.parentNode&&n.element.parentNode.removeChild(n.element)},o.outDuration+112)}},w=()=>{if(!t)return;const e=M();p.x=b.lerp(p.x||i.x,i.x,.1),p.y=b.lerp(p.y||i.y,i.y,.1),e>o.mouseThreshold&&O(i.x,i.y)&&(P(),D={...i}),T(),requestAnimationFrame(w)},I=()=>{t&&(document.addEventListener("mousemove",e=>{i={x:e.clientX,y:e.clientY}}),c=requestAnimationFrame(w))},F=()=>{c&&(cancelAnimationFrame(c),c=null),s.forEach(e=>{e.element.parentNode&&e.element.parentNode.removeChild(e.element)}),s.length=0},Y=()=>{const e=t;t=window.innerWidth>1e3,t&&!e?I():!t&&e&&F()};window.addEventListener("resize",Y),t&&I()});
